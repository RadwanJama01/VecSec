# DDoS Protection Configuration Examples
# =====================================

# This file contains example configurations for the DDoS protection system.
# Copy the relevant sections to your .env file or set as environment variables.

# =============================================================================
# BASIC CONFIGURATION
# =============================================================================

# Default target URL for the proxy
DEFAULT_TARGET_URL=https://httpbin.org

# Allowed hosts (comma-separated, empty means allow all)
ALLOWED_HOSTS=

# Blocked paths (comma-separated)
BLOCKED_PATHS=

# =============================================================================
# DDoS PROTECTION CONFIGURATION
# =============================================================================

# Rate Limiting (requests per time period)
DDOS_REQUESTS_PER_MINUTE=60
DDOS_REQUESTS_PER_HOUR=1000
DDOS_REQUESTS_PER_DAY=10000

# Connection Limits
DDOS_MAX_CONNECTIONS=10
DDOS_MAX_REQUEST_SIZE=10485760  # 10MB in bytes
DDOS_MAX_HEADER_SIZE=8192       # 8KB in bytes

# Timeout Configuration
DDOS_REQUEST_TIMEOUT=30
DDOS_SLOW_REQUEST_THRESHOLD=10  # seconds

# Blocking Configuration
DDOS_BLOCK_DURATION=300         # 5 minutes in seconds
DDOS_MAX_VIOLATIONS=5            # violations before auto-block

# Redis Configuration (for distributed rate limiting)
DDOS_REDIS_ENABLED=false
DDOS_REDIS_URL=redis://localhost:6379/0

# IP Management
DDOS_ALLOWLIST=192.168.1.100,10.0.0.50
DDOS_BLOCKLIST=192.168.1.200,10.0.0.100

# =============================================================================
# PRODUCTION CONFIGURATION EXAMPLES
# =============================================================================

# Example 1: High-Traffic Production Server
# ----------------------------------------
# DDOS_REQUESTS_PER_MINUTE=300
# DDOS_REQUESTS_PER_HOUR=5000
# DDOS_REQUESTS_PER_DAY=50000
# DDOS_MAX_CONNECTIONS=50
# DDOS_MAX_REQUEST_SIZE=52428800  # 50MB
# DDOS_REDIS_ENABLED=true
# DDOS_REDIS_URL=redis://redis-cluster:6379/0

# Example 2: Development/Testing Server
# -----------------------------------
# DDOS_REQUESTS_PER_MINUTE=10
# DDOS_REQUESTS_PER_HOUR=100
# DDOS_REQUESTS_PER_DAY=1000
# DDOS_MAX_CONNECTIONS=5
# DDOS_MAX_REQUEST_SIZE=1048576   # 1MB
# DDOS_REDIS_ENABLED=false

# Example 3: Strict Security Server
# --------------------------------
# DDOS_REQUESTS_PER_MINUTE=30
# DDOS_REQUESTS_PER_HOUR=500
# DDOS_REQUESTS_PER_DAY=5000
# DDOS_MAX_CONNECTIONS=5
# DDOS_MAX_REQUEST_SIZE=2097152   # 2MB
# DDOS_BLOCK_DURATION=1800        # 30 minutes
# DDOS_MAX_VIOLATIONS=3
# DDOS_ALLOWLIST=192.168.1.0/24,10.0.0.0/8

# =============================================================================
# REDIS CONFIGURATION EXAMPLES
# =============================================================================

# Local Redis
# DDOS_REDIS_URL=redis://localhost:6379/0

# Redis with Authentication
# DDOS_REDIS_URL=redis://username:password@localhost:6379/0

# Redis Cluster
# DDOS_REDIS_URL=redis://node1:6379,node2:6379,node3:6379/0

# Redis with SSL
# DDOS_REDIS_URL=rediss://username:password@redis.example.com:6380/0

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Log Level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Enable detailed DDoS logging
DDOS_DETAILED_LOGGING=true

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Custom rate limiting per endpoint (set in code)
# Example: /analyze endpoint limited to 10 requests per minute
# Example: /scan endpoint limited to 5 requests per minute

# Custom IP ranges for allowlist/blocklist
# DDOS_ALLOWLIST=192.168.1.0/24,10.0.0.0/8,172.16.0.0/12
# DDOS_BLOCKLIST=192.168.1.200,10.0.0.100,malicious-ip.com

# =============================================================================
# DEPLOYMENT EXAMPLES
# =============================================================================

# Docker Compose with Redis
# -------------------------
# services:
#   redis:
#     image: redis:7-alpine
#     ports:
#       - "6379:6379"
#   
#   flask-proxy:
#     build: .
#     environment:
#       - DDOS_REDIS_ENABLED=true
#       - DDOS_REDIS_URL=redis://redis:6379/0
#       - DDOS_REQUESTS_PER_MINUTE=100
#     depends_on:
#       - redis

# Kubernetes ConfigMap
# -------------------
# apiVersion: v1
# kind: ConfigMap
# metadata:
#   name: ddos-config
# data:
#   DDOS_REQUESTS_PER_MINUTE: "200"
#   DDOS_REQUESTS_PER_HOUR: "2000"
#   DDOS_MAX_CONNECTIONS: "20"
#   DDOS_REDIS_ENABLED: "true"
#   DDOS_REDIS_URL: "redis://redis-service:6379/0"

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================

# For testing DDoS protection, use these settings:
# DDOS_REQUESTS_PER_MINUTE=5
# DDOS_MAX_CONNECTIONS=2
# DDOS_BLOCK_DURATION=60
# DDOS_MAX_VIOLATIONS=2

# Then test with:
# for i in {1..10}; do curl http://localhost:8080/health; done
# This should trigger rate limiting after 5 requests
